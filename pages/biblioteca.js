import Head from "next/head";
import styles from "../styles/Home.module.css";
import { useRouter } from "next/router";
import { useState, useEffect } from "react";
import Navbar from "./Componentes/Navbar";
import Footer from "./Componentes/Footer";
import supabase from "../config/supabaseClient";

export default function Home() {
  const router = useRouter();
  const [sesion, setSesion] = useState(null);
  const [ejercicios, setEjercicios] = useState(null);

  useEffect(() => {
    getEjercicios();
  }, []);

  async function getEjercicios() {
    const data = await supabase.from('prueba_ejercicios').select('*')
    setEjercicios(data.data);
    console.log(ejercicios)
  }

  return (
    <div className="bg-stone-100 w-full" data-theme="emerald">
      <Head>
        <title>EvoltFit</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Navbar />

      <main>
        <br />
        <br />
        <br />
        <br />
        <br />
        <br />
        <h2 className="text-2xl text-left text-center">Biblioteca de Ejercicios</h2>
        
          {
            ejercicios ? 
            <div className="w-9/12 mx-auto">
              {
                ejercicios.map((ejercicio) =>(
                <div className="max-w-sm w-full lg:max-w-full lg:flex drop-shadow-md my-6">
                  <div className="h-48 lg:h-auto lg:w-48 flex-none bg-cover rounded-t lg:rounded-t-none lg:rounded-l text-center overflow-hidden" style={{backgroundImage: 'url("'+ejercicio.img+'")'}}>
                  </div>
                  <div className=" bg-white rounded-b lg:rounded-b-none lg:rounded-r p-4 flex flex-col justify-between leading-normal">
                    <div className="mb-8">
                      <p className="text-sm text-gray-600 flex items-center">
                        <svg className="fill-current text-gray-500 w-3 h-3 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                          <path d="M4 8V6a6 6 0 1 1 12 0v2h1a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h1zm5 6.73V17h2v-2.27a2 2 0 1 0-2 0zM7 6v2h6V6a3 3 0 0 0-6 0z" />
                        </svg>
                        {ejercicio.musculo_primario}
                      </p>
                      <div className="text-gray-900 font-bold text-xl mb-2">{ejercicio.nombre}</div>
                      <p className="text-gray-700 text-base">{ejercicio.recomendaciones}</p>
                    </div>
                    <div className="flex items-center">
                      <div className="text-sm mr-4">
                        <p className="text-gray-900 leading-none font-semibold">Otros m√∫sculos activados:</p>
                        <p className="text-gray-600">{ejercicio.musculo_otros.join(", ")}</p>
                      </div>
                      <div className="text-sm">
                        <p className="text-gray-900 leading-none font-semibold">Equipo:</p>
                        <p className="text-gray-600">{ejercicio.herramienta.join(", ")}</p>
                      </div>
                    </div>
                  </div>
                </div>
              ))
              }
              
            </div> 
            : 
            <div>
              <button className="btn btn-outline btn-lg btn-secondary loading"> Cargando</button>
            </div>
          }
      
      </main>
      <Footer></Footer>
    </div>
  );
}
